> 主要参考学习资料及插图来源：
>
> 《机器人学导论（第4版）》John J.Craig著
>
> 台大机器人学之运动学——林沛群
>
> 本章数理基础：矩阵的四则运算
>
> 码字不易，求点赞收藏加关注(´•ω•̥`)
>
> 有问题欢迎评论区讨论~

@[TOC](目录)
# 操作臂（正向）运动学

**运动学**讨论运动状态本身，不涉及产生运动的力
___
## 连杆的描述
___
### 连杆参数

**关节**（Joint）分为移动关节和旋转关节，每个关节有一个自由度，对一个特定的轴移动或转动

**连杆**（Link）为连接关节的杆件，视作刚体

连杆的编号从固定基座开始，称固定基座为连杆0，第一个可动连杆为连杆1，以此类推，操作臂最末端的连杆为连杆n

**单个连杆：连杆长度和连杆扭转角**

连杆$i-1$连接了关节轴$i-1$和关节轴$i$，关节轴$i-1$和关节轴$i$之间公垂线长度$a_{i-1}$为**连杆长度**

作一平面与两关节轴公垂线垂直，关节轴$i-1$和关节轴$i$在该平面上投影的夹角$\alpha_{i-1}$为**连杆扭转角**（即空间中两直线夹角的定义）
![](https://i-blog.csdnimg.cn/direct/7becb6da81c24198a3e6b5c9e0c03a65.png)
*平面图像表达空间关系可能存在视错觉，需结合文字描述来分析*

**多杆串连：连杆偏距和关节角**

关节轴$i$上的两个相邻连杆沿公共轴线方向的距离$d_i$为**连杆偏距**

两个相邻连杆绕公共轴线旋转的夹角$\theta_i$为**关节角**

对于首端连杆（固定基座）和末端连杆（末端执行器），习惯设定$a_0=a_n=0$，$\alpha_0=\alpha_n=0$

对于关节$1$，若为转动关节，$\theta_1$任取，$d_1=0$；若为移动关节，$d_1$任取，$\theta_1=0$。关节$n$同理
![](https://i-blog.csdnimg.cn/direct/e4f10af843b7462591b22564c042253b.png)


**连杆参数**

由此，机器人的每个连杆都可以用上述四个运动学参数来描述

对于转动关节，$\theta_i$为关节变量，其他三个连杆参数固定不变；对于移动关节，$d_i$为关节变量，其他三个连杆参数固定不变。这种用连杆参数描述机构运动关系的规则称为**Denavit-Hartenberg方法（简称D-H表示法）**
___
### 连杆坐标系

**中间连杆坐标系**

按以下方法确定连杆上的固连坐标系$\{i\}$：

原点位于公垂线$a_i$与关节轴$i$的交点处

$\hat{Z}_i$轴与关节轴$i$重合

$\hat{X}_i$轴：当$a_i\ne0$，沿$a_i$方向由关节$i$指向关节$i+1$；当$a_i=0$，垂直于$\hat{Z}_i$和$\hat{Z}_{i+1}$所在的平面

$\hat{Y}_i$轴由右手定则确定

由于$\hat{Z}_i$轴可选取两个方向，且当关节轴$i$与$i+1$相交时$\hat{X}_i$轴可选取两个方向，建立的坐标系并不唯一
![](https://i-blog.csdnimg.cn/direct/fd03f86cbf22475abfdde32b77332cda.png)


**首末端连杆坐标系**

首端连杆坐标系$\{0\}$与关节$1$初始姿态时（关节变量为$0$）的坐标系$\{1\}$重合

末端连杆坐标系$\{N\}$原点位于公垂线$a_{N-1}$与关节轴$\{N\}$交点处，$\hat{X}_N$轴与$\hat{X}_{N-1}$轴同向

**连杆坐标系中的D-H表示法**

$a_i=$沿$\hat{X}_i$轴从$\hat{Z}_i$移动到$\hat{Z}_{i+1}$的距离

$\alpha_i=$绕$\hat{X}_i$轴从$\hat{Z}_i$旋转到$\hat{Z}_{i+1}$的角度

$d_i=$沿$\hat{Z}_i$轴从$\hat{X}_{i-1}$移动到$\hat{X}_i$的距离

$\theta_i=$绕$\hat{Z}_i$轴从$\hat{X}_{i-1}$旋转到$\hat{X}_i$的角度

$a_i>0$，$\alpha_i$、$d_i$和$\theta_i$的值相对于坐标系主轴方向有正负

**建立连杆坐标系的步骤**

1.画出各关节轴的延长线

2.找出相邻关节轴$i$和$i+1$的公垂线或交点，以关节轴$i$和$i+1$的交点或公垂线与关节轴$i$的交点作为连杆坐标系$\{i\}$的原点

3.规定$\hat{Z}_i$轴沿关节轴$i$的指向

4.规定$\hat{X}_i$轴沿公垂线的指向，若关节轴$i$与$i+1$相交则垂直于关节轴$i$与$i+1$所在的平面

5.按右手定则确定$\hat{Y}_i$轴

6.补充首末端连杆坐标系

**坐标系的标准命名**

基（Base）坐标系$\{B\}$位于操作臂的基座上

固定（Settle）坐标系$\{S\}$位置与任务相关，比如工作台的一个角上

腕部（Wrist）坐标系$\{W\}$位于操作臂的末端连杆

工具（Tool）坐标系$\{T\}$位于机器人所夹持工具的末端

目标（Goal）坐标系$\{G\}$是对机器人移动工具到达的位置描述
![](https://i-blog.csdnimg.cn/direct/1db138fe35fa4323b1ffda7e0a61e5cd.png)

___
## 操作臂运动学
___
### 连杆变换（Link Transformation）

我们希望用四个连杆参数建立起相邻连杆坐标系$\{i\}$和$\{i-1\}$之间的变换关系，即$^{i-1}P=^{i-1}_{i}T^iP$
![](https://i-blog.csdnimg.cn/direct/457b9d1ae8a94e3783d665e35a80b308.png)


我们考虑借由图中标出的四个连杆参数将$\{i-1\}$一步步变换为$\{i\}$

将$\{i-1\}$绕$\hat{X}_{i-1}$旋转$\alpha_{i-1}$得到$\{R\}$

将$\{R\}$沿$\hat{X}_R$平移$a_{i-1}$得到$\{Q\}$

将$\{Q\}$绕$\hat{Z}_Q$旋转$\theta_i$得到$\{P\}$

将$\{P\}$沿$\hat{Z}_P$平移$d_i$得到$\{i\}$

于是变换矩阵可写成：

$^{i-1}P=^{i-1}_{i}T^iP=^{i-1}_RT^R_QT^Q_PT^P_iT^iP$

$^{i-1}_{i}T=^{i-1}_RT^R_QT^Q_PT^P_iT=R_X(\alpha_{i-1})D_X(a_{i-1})R_Z(\theta_i)D_Z(d_i)$

最终计算得到：

$^{i-1}_{i}T=\begin{bmatrix}c\theta_i&-s\theta_i&0&a_{i-1}\\s\theta_ic\alpha_{i-1}&c\theta_ic\alpha_{i-1}&-s\alpha_{i-1}&-s\alpha_{i-1}d_i\\s\theta_is\alpha_{i-1}&c\theta_is\alpha_{i-1}&c\alpha_{i-1}&c\alpha_{i-1}d_i\\0&0&0&1\end{bmatrix}$

左上角$3\times3$为旋转矩阵，最右列为$\{i\}$的原点相对于$\{i-1\}$的原点的位置矢量

计算出各个连杆变换矩阵，将其连乘就能得到$\{N\}$相对于$\{0\}$的变换矩阵：

$^0_NT=^0_1T^1_2T^2_3T…^{N-1}_NT$
___
### 驱动器空间、关节空间和笛卡尔空间

对一个具有$n$个自由度的操作臂来说，它的所有连杆位置可由一组$n$个关节变量确定，这样的一组变量被称为$n\times1$的关节向量，所有关节向量组成的空间称为**关节空间（Joint Space）**

至此，我们研究的是如何将已知的关节空间描述转化为在**笛卡尔空间（Cartesian Space）**中的描述，称为**正向运动学（Forward Kinematics）**，反之则为**逆运动学（Inverse Kinematics）**

我们一直假设每个运动关节都是直接由某种驱动器驱动，但许多机器人有时用两个驱动器以差动的方式驱动一个关节，有时用直线驱动器通过四连杆机构来驱动旋转关节，而测量操作臂位置的传感器常常安装在驱动器上，因此进行控制器运算时必须把关节向量表示成一组驱动器变量方程，即驱动向量，组成的空间称为**驱动器空间（Actuator Space）**
![](https://i-blog.csdnimg.cn/direct/05578fe2342d4bba97a0096a9d969cab.png)

___
**本章完**
